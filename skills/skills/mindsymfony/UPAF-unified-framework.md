# 统一规划评估框架 (UPAF - Unified Planning & Assessment Framework)

> MindSymphony v20 整合版的核心框架，将规划、执行、评估能力统一到三个层级中

---

## 框架架构

```
┌─────────────────────────────────────────────────────────────────┐
│                    UPAF 三层架构                                 │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │ Layer 3: 质量门 (Quality Gate)                            │  │
│  │                                                             │  │
│  │  quality-gate v2.0 ─────────────────┐                    │  │
│  │  ├─ 结构完整性校验                │                    │  │
│  │  ├─ 逻辑一致性审计                │                    │  │
│  │  ├─ 格式规范检查                  │                    │  │
│  │  └─ Skill_Hub 集成 ────────────────┘                    │  │
│  │      ├─ 功能匹配评估（30%权重）                           │  │
│  │      ├─ 质量锚点检查                                      │  │
│  │      ├─ 重复度检测（40%权重）                             │  │
│  │      └─ 自动适配                                           │  │
│  └───────────────────────────────────────────────────────────┘  │
│                           ▲                                     │
│                           │                                     │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │ Layer 2: 批判思维层 (Critical Thinking)                   │  │
│  │                                                             │  │
│  │  assumption-remove  │  paradox-transcend v2.0  │  dialectic  │  │
│  │  (虚空定音鼓)      │  (衔尾蛇长笛)              │  -analysis  │  │
│  │  ├─ 假设移除        │  ├─ 超越模式                │  (辩证核心)  │  │
│  │  ├─ 本质追问        │  │  ├─ 悖论构建                │  ├─ 正题      │  │
│  │  └─ 意义留白        │  │  ├─ 认知跃迁                │  ├─ 反题      │  │
│  │                    │  ├─ 揭示模式                │  └─ 合题      │  │
│  │                    │  │  ├─ 矛盾识别                │              │  │
│  │                    │  │  ├─ 不可能三角              │              │  │
│  │                    │  │  └─ 诚实审计                │              │  │
│  └───────────────────────────────────────────────────────────┘  │
│                           ▲                                     │
│                           │                                     │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │ Layer 1: 战略规划层 (Strategic Planning)                 │  │
│  │                                                             │  │
│  │        cognitive-architect v2.0 (蜂后)                     │  │
│  │        ├─ 战略分解模式                                     │  │
│  │        │  ├─ 任务分解                                       │  │
│  │        │  ├─ 技能调度                                       │  │
│  │        │  └─ 全局监控                                       │  │
│  │        ├─ 自主执行模式                                     │  │
│  │        │  ├─ 自主目标分析                                   │  │
│  │        │  ├─ 执行编排                                       │  │
│  │        │  └─ 动态调整                                       │  │
│  │        └─ 评估验证模式                                     │  │
│  │            ├─ 效果预估                                       │  │
│  │            ├─ 可行性分析                                     │  │
│  │            └─ 效果验证                                       │  │
│  └───────────────────────────────────────────────────────────┘  │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 技能整合对照表

| 整合后技能 | 版本 | 整合的原技能 | 状态 |
|-----------|------|-------------|------|
| **cognitive-architect** | v2.0 | cognitive-architect v1.0 + action-planning + efficacy-evaluator | ✅ 完成 |
| **paradox-transcend** | v2.0 | paradox-transcend v1.0 + paradox-reveal | ✅ 完成 |
| **quality-gate** | v2.0 | quality-gate v1.0 + Skill_Hub 集成 | ✅ 完成 |
| **assumption-remove** | v1.0 | 保留不变 | ✅ 保留 |
| **dialectic-analysis** | v1.0 | 保留不变 | ✅ 保留 |

---

## 工作流程

### 标准规划流程

```
用户需求 → cognitive-architect 模式选择 → 分解/执行/评估
    │               │                        │
    ▼               ▼                        ▼
 意图分析      关键词匹配               三种模式之一
           (全权负责/自主                ↓
            完成→自主模式)           战略分解/自主执行/评估验证
            (评估→验证模式)
```

### 评估流程

```
内容/方案 → quality-gate 模式选择 → 评估方式
    │              │                   │
    ▼              ▼                   ▼
 需求分析     文件类型              三种模式
           (Skill.md/              ↓
            外部skill)           人工校验/自动评估/自动适配
```

---

## 快速参考

### 规划相关关键词映射

| 关键词 | 触发技能 | 模式 |
|--------|----------|------|
| 计划、分解、协调、项目管理 | cognitive-architect | 战略分解模式 |
| 全权负责、自主完成、端到端 | cognitive-architect | 自主执行模式 |
| 评估、可行性、有效性 | cognitive-architect | 评估验证模式 |

### 评估相关关键词映射

| 关键词 | 触发技能 | 模式 |
|--------|----------|------|
| 校验、质量门、完整性 | quality-gate | 人工校验模式 |
| 质量、检查、验证 | quality-gate | 自动评估模式 |
| 适配、转换、标准化 | quality-gate | 自动适配模式 |

### 批判思维关键词映射

| 关键词 | 触发技能 |
|--------|----------|
| 悖论、自指、逻辑困境、认知跃迁 | paradox-transcend（超越模式） |
| 矛盾、冲突、不可能三角、风险 | paradox-transcend（揭示模式） |
| 假设、第一性原理、质疑 | assumption-remove |
| 辩证、综合、对立统一 | dialectic-analysis |

---

## 使用示例

### 示例 1：复杂项目规划

**用户**："开发一个 AI 学习助手 APP，从概念到原型"

**流程**：
1. `cognitive-architect`（战略分解模式）分解任务
2. 协调 skills 执行
3. `quality-gate`（人工校验模式）验收成果

### 示例 2：自主执行项目

**用户**："全权负责完成 Skill_Hub 融合实现"

**流程**：
1. `cognitive-architect`（自主执行模式）自主分解并执行
2. 内部调用 `quality-gate`（自动评估模式）验证
3. 提交《任务完成报告》

### 示例 3：外部 Skill 评估

**用户**："评估这个 latex-assistant skill 是否适合我们"

**流程**：
1. `quality-gate`（自动评估模式）调用 Skill_Hub
2. 执行功能匹配评估（30%权重）
3. 给出 ADOPT/ADAPT/ABSORB/SKIP 建议

### 示例 4：深度批判分析

**用户**："分析这个方案的深层矛盾"

**流程**：
1. `paradox-transcend`（揭示模式）构建不可能三角
2. `assumption-remove` 质疑底层假设
3. `dialectic-analysis` 辩证整合

---

## 版本历史

| 版本 | 日期 | 变更 |
|------|------|------|
| v1.0 | 2024-Q4 | 初始版本，12个独立 skills |
| v2.0 | 2024-Q4 | 整合为6个核心 skills，减少50%重叠 |

---

## 维护指南

### 添加新评估维度

1. 更新 `Skill_Hub/evaluation.py` 添加新的评估器
2. 更新 `quality-gate.md` 引用新能力
3. 更新本文档的架构图

### 添加新工作模式

1. 在对应 skill 中添加新的模式定义
2. 更新触发词列表
3. 更新快速参考表
